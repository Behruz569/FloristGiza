<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Florist Giza</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #fdf6f6;
      color: #333;
    }
    header {
      background-image: url('https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      height: 70vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.5);
      flex-direction: column;
      text-align: center;
    }
    header h1 {
      font-size: 3em;
      margin: 0;
    }
    header p {
      font-size: 1.2em;
      margin-top: 1rem;
      max-width: 600px;
    }
    nav {
      background: #8b0000;
      color: white;
      display: flex;
      justify-content: center;
      gap: 2rem;
      padding: 1rem 0;
    }
    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }
    section {
      padding: 2rem;
    }
    .product-card {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 1rem;
      max-width: 300px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 1rem;
    }
    .product-card img {
      width: 100%;
      border-radius: 10px;
    }
    footer {
      text-align: center;
      padding: 1.5rem;
      background-color: #222;
      color: #eee;
    }
    input, button, textarea {
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background: #8b0000;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <h1>Florist Giza</h1>
  <p>–ö—Ä–∞—Å–æ—Ç–∞, —Ç—Ä—É–¥ –∏ –ª—é–±–æ–≤—å –≤ –∫–∞–∂–¥–æ–º —Ü–≤–µ—Ç–∫–µ üå∏. –†–∞–±–æ—Ç–∞–µ–º —Å –¥—É—à–æ–π —Ä–∞–¥–∏ –≤–∞—à–µ–≥–æ —Å—á–∞—Å—Ç—å—è.</p>
</header>

<nav>
  <a href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
  <a href="#add-product">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
</nav>

<section id="catalog">
  <h2>–ö–∞—Ç–∞–ª–æ–≥</h2>
  <div id="product-list" style="display: flex; flex-wrap: wrap; gap: 20px;"></div>
</section>

<section id="add-product">
  <h2>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)</h2>
  <div>
    <input type="text" id="admin-phone" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" />
    <input type="text" id="product-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" />
    <textarea id="product-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"></textarea>
    <input type="file" id="product-image" accept="image/*" />
    <button onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
  </div>
</section>

<footer>
  ¬© 2025 Florist Giza | –°–¥–µ–ª–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é
</footer>

<script>
  const telegramBotToken = "5641966809:AAEJVSxOLel8gcRQOVg_AcJOR8W0G1nC9Po";
  const telegramChatId = "5585811533";

  function generateId() {
    return 'ID' + Math.floor(Math.random() * 1000000);
  }

  function addProduct() {
    const phone = document.getElementById('admin-phone').value.trim();
    const allowed = ['+998940233830', '+998909059078'];
    if (!allowed.includes(phone)) {
      alert("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞: –≤—ã –Ω–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä");
      return;
    }

    const name = document.getElementById('product-name').value.trim();
    const description = document.getElementById('product-description').value.trim();
    const imageInput = document.getElementById('product-image');
    const file = imageInput.files[0];

    if (!name || !description || !file) {
      alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ");
      return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
      const imageUrl = e.target.result;
      const productId = generateId();

      const product = { id: productId, name, description, imageUrl };
      const products = JSON.parse(localStorage.getItem("products") || "[]");
      products.push(product);
      localStorage.setItem("products", JSON.stringify(products));
      renderProducts();

      // Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      const message = `üõçÔ∏è –ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${name}\n–û–ø–∏—Å–∞–Ω–∏–µ: ${description}\nID: ${productId}\n–î–æ–±–∞–≤–∏–ª: ${phone}`;
      fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&text=${encodeURIComponent(message)}`);

      alert("–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!");
    };
    reader.readAsDataURL(file);
  }

  function renderProducts() {
    const container = document.getElementById("product-list");
    container.innerHTML = "";
    const products = JSON.parse(localStorage.getItem("products") || "[]");
    products.forEach(prod => {
      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <img src="${prod.imageUrl}" alt="${prod.name}" />
        <h3>${prod.name}</h3>
        <p>${prod.description}</p>
        <button onclick="orderProduct('${prod.id}')">üõí –ó–∞–∫–∞–∑–∞—Ç—å (${prod.id})</button>
      `;
      container.appendChild(card);
    });
  }

  function orderProduct(productId) {
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    const phone = user.phone || '–ù–µ —É–∫–∞–∑–∞–Ω';
    const message = `üõçÔ∏è –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\nID —Ç–æ–≤–∞—Ä–∞: ${productId}\n–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: ${phone}`;
    fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&text=${encodeURIComponent(message)}`);
    alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderProducts();
  });
</script>

</body>
</html>
